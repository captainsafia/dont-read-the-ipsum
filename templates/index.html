<!doctype html>
<html lang="en">
   <head>
      <!--   <link rel="stylesheet" type="text/css" href="css/themes/easydropdown.css"/>
         -->  
      <link rel="stylesheet" type="text/css" href="../static/styles/easydropdown.flat.css"/>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="A layout example that shows off a responsive product landing page.">
      <title>Landing Page &ndash; Layout Examples &ndash; Pure</title>
      <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
      <!--[if lte IE 8]>
      <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-old-ie-min.css">
      <![endif]-->
      <!--[if gt IE 8]><!-->
      <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
      <!--<![endif]-->
      <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <!--[if lte IE 8]>
      <link rel="stylesheet" href="css/layouts/marketing-old-ie.css">
      <![endif]-->
      <!--[if gt IE 8]><!-->
      <link rel="stylesheet" href="../static/styles/marketing.css">
      <!--<![endif]-->
      <script src="../static/scripts/formatScripts.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
      <script src="../static/scripts/jquery.easydropdown.min.js" type="text/javascript"></script>
   </head>
   <body>
      <div class="splash-container">
         <div class="content">
            <img id="logo" src="../static/img/logo.png">
            <form>
            <div id="selectWrapper">
              <div class="inputContainer" id="leftbox">
                <select class="dropdown" id="inputType">
                   <option value="" class="label">input</option>
                   <option value="reddit">reddit thread</option>
                   <option value="handle">twitter handle</option>
                   <option value="replies">@replies to handle</option>
                </select>
                <input type="text" id="inputID" value="OfficialJaden">
              </div><div class="inputContainer" id="rightbox">
                <select class="dropdown" id="outputType">
                   <option value="" class="label">output</option>
                   <option value="pars">paragraphs</option>
                   <option value="words">text block</option>
                   <option value="letter">letter</option>
                   <option value="poem">free verse poem</option>
                </select>
                <input type="text" id="outputNum" value="8">
              </div>
            </div>
            <input type="submit" value="GENERATE">
            </form>
            <div id="output" style="display:none"></div>
            <div id="garbage" style="display:none"><img src="../static/img/garbage.gif"></div>
         </div>
      </div>
      <div class="content-wrapper">
         <div class="footer l-box is-center">
            made in a weekend at comedy hack day chi by team ipsum
         </div>
      </div>
      <script>
        var input,
            inputType,
            outputType,
            inputID,
            outputNum,
            apiPath,
            data;

      $("form").submit(function(event){
        event.preventDefault();
        if($('#output:visible')){
          $('#output').css('display', 'none');
        }
        $('#garbage').css('display', 'block');
          var inputType=$('#inputType').val();
          var outputType=$('#outputType').val();
          var inputID=$('#inputID').val();
          var outputNum=$('#outputNum').val();

          
          switch(inputType){
            case("reddit"):
              //get reddit url val and set vars
              apiPath='/api/comment/ipsum/reddit';
              data={count:2000, count_type:"words", source:inputID};
              break;
            case("handle"):
              //get twitter handle and set vars
              apiPath='/api/comment/ipsum/twitter';
              data={count:2000, count_type:"words", source:inputID, tweets_or_replies:"tweets"};
              break;
            case("replies"):
              //get twitter handle and set vars
              apiPath='/api/comment/ipsum/twitter';
              data={count:2000, count_type:"words", source:inputID, tweets_or_replies:"replies"};
              break;
          }

          console.log(data);
          $.post( apiPath, data, function( response ) {
              console.log(data);
              console.log(response);
              input = response.text;
          })
          .done(function(data){
            console.log("loaded");
            switch(outputType){
              case("pars"):
                $('#output').html(gimmeNormal(input, outputNum)).promise().done(showOutput());
                break;
              case("words"):
                $('#output').html(gimmeNormal(input, 1, outputNum)).promise().done(showOutput());
                break;
              case("letter"):
                $('#output').html(gimmeLetter(input)).promise().done(showOutput());
                break;
              case("poem"):
                $('#output').html(gimmeFreeVerse(input, outputNum)).promise().done(showOutput());
            }
          });          
      });
      function showOutput(){
        $('#garbage').fadeOut('slow');
        $('#output').slideDown('slow');
        console.log("trigger");
      }
      </script>
   </body>
</html>
